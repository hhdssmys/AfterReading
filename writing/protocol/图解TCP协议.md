#### 《图解TCP/IP》
&emsp;&emsp;本书通俗易懂，篇幅较短，但是涉猎有限，只能用来快速复习 TCP/IP 协议簇的整体概况，可能在某些面试中的深究知识都不能完全覆盖。因此，价值有限。  
##### 重点阅读下各层的协议即可：  
&emsp;&emsp;数据链路层，传输层（IP），网络层（TCP），应用层这几章
```
网络协议分层： 明确规定各层协议的作用与责任，其实现与编程相对简单与易扩展（不要把所有的要求集于一层，该层结构复杂难以实现）


数据链路层：
载波监听
令牌传递
网桥（2层交换机）环路：生成树，源路由法


网络层：（IP）
IP 分片（不同的数据链路层有不同的最大传输单元 MTU，IP对上屏蔽了这一细节，自己针对不同的数据链路层做细分 ）
IP 面向无连接（简单，提速，存在丢包可能所以是尽力服务）
IP地址：网络地址 + 主机地址，子网掩码（点十进制表示的网络地址，多少位连续的1就表示多少位网络地址）
私有地址，公有地址，NAT地址置换技术
路由器默认根据网络地址进行路由，也有32位参与的主机路由（会造成路由表膨大，网络性能下降）
路由控制表（路由协议制定，不是IP协议制定）
路由聚合（虚拟网络地址，合并多个网段，只表示前多少位是相同的）
路径 MTU 发现：路径中所有数据链路层中取最小的 MTU，在发送主机做IP分片，可以减少路由器的负担（TCP重发，所以TCP分片，IP不分片；UDP不重发，IP分片）
IPv4： 32 位，点号分隔，4个 8位字节，例如：
IPv6： 128位，冒号分隔，8个16位字节，例如：
IPv4 首部：没有首部扩展，长度就是固定的4 * 5 = 20 字节

主机名(+分层性质的域名) --->>> 公有IP地址 --->>> 私有IP地址 --->>> Mac地址
	                    DNS		         NAT           ARP/ICMPv6
DNS域名服务器：存储下一层域名服务器与IP地址的映射关系，存储在hosts文件中（因为上层只知道直接下层，下层不知道上层信息，所以只能自上而下，只有根域名服务器可以通过遍历，查询所有未知域名，所以 DNS 域名解析时，遇到未知域名时，需要去根服务器查询，由其返回结果，在与目标直接通信）

ARP：需要广播的ARP请求包（不同网段间路由器间使用？），填充MAC地址的ARP响应包，ARP表（记录IP地址与Mac地址的映射关系）
RARP: 从RARP服务器中根据自己的MAC地址获取IP地址，适用于没有输入接口或不能动态设置IP的设备，如打印机

ICMP：基于IP的明文传输，负责通知IP传输的反馈，作用不足以划分至传输层，因此作为IP的补充。其大致分为两类：1）通知出错原因的错误消息 2) 用于诊断的查询消息
DHCP：逐一配置IP过于繁琐，所以动态配置，DHCP服务器负责IP地址的唯一性，DHCP两阶段（两阶段导致IP重复时也可以解决）：发现包（申请一个），请求包（确认使用）

NAT（NAPT）：私有与公有IP地址置换，一个公有IP与多个私有IP主机通信，会在NAT路由器自动生成一张转换表，NAPT多了端口转换，增加多样性

传输层（TCP、UDP）： 主机端口与网卡端口意义不一样
传输层的唯一地址标识是端口号，识别同一台计算机中用来通信的不同应用程序，所以端口号也叫程序地址
TCP/IP 协议中标识一个通信，包括5部分：源IP，目标IP，，源端口，目标端口，协议号
端口上的处理是根据传输协议而进行的，因此不同的传输协议，使用同一端口号，互不影响。但是系统预分配的端口号（0-1023）基本上不同协议实现了同一个服务，尽量不要使用这些端口号
UDP（用户数据报）：无连接的，不可靠的用户数据报协议，没有提供负责的控制机制，将其责任上移至上层协议或应用程序
TCP（传输控制）：面向连接的，可靠的流协议；顺序控制，重发控制，流量控制，拥塞控制
生产端的简单重发（缺失或超时），会导致接收端的复杂处理（数据是否重复），序列号可以解决重复，顺序等
序列号：初始值是建立链接时随机的，后续值根据内容的字节长度叠加
TCP链接：确认对端是否存在 -->>>>>-----三次握手---->>> 发送SYN，对端ACK（确认应答）+ SYN（请求建立链接），发送端ACK
三次握手时确认TCP最大消息长度MSS，最理想的情况，MSS正好是IP中不会被分片处理的最大数据长度MTU
滑动窗口控制：无需等待确认应答而可以继续发送数据的最大值，只有收到确认应答才会窗口滑动，这样避免了每发一个消息等待一次确认才发送下一个消息的慢速处理
			如果是ACK确认应答丢失，只要及时收到下个报文ACK确认应答（位置靠后的报文），就不需要重发
			如果是消息丢失，接收端没有收到自己期望序列的数据时，会对之前的数据进行确认应答（收5000答1000），而发送端在接收某个ACK确认应答后，又连续3次收到同样的确认应答，则认为数据丢失，需要重发
流量控制：接收端向发送端通知自己可以接收数据缓冲的大小，即滑动窗口的大小
拥塞控制：比较拥塞窗口与滑动窗口的大小，取最小的值，避免网络拥塞；慢启动：最开始拥塞窗口大小为1 ，每接收一个ACK，增加一次拥塞窗口的大小


路由协议：
IP：网络地址（负责网络间的路由选择） + 主机地址（负责同一链路中主机选择）
EGP负责区域网络之间的路由选择，IGP负责区域网络内部主机识别
IGP（域内路由协议）：
EGP（域间路由协议）：












首部至少包含三部分信息：源地址，目标地址，上层协议类型

mac地址转发表 接口与mac地址
路由控制表	路由器与网络ip
```
